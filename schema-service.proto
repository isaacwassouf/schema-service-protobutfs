syntax = "proto3";

option go_package = "./schema-management-service";

import "google/protobuf/empty.proto";

service SchemaService {
  rpc CreateTable(CreateTableRequest) returns (CreateTableResponse);
  rpc DropTable (DropTableRequest) returns (DropTableResponse);
}

message VarCharColumn {
  uint32 length = 1;
}

enum IntegerColumnType {
  INT = 0;
  BIGINT = 1;
  MEDIUMINT = 2;
  SMALLINT = 3;
  TINYINT = 4;
}

message IntegerColumn {
  IntegerColumnType type = 2;
  bool is_unsigned = 3;
}

message Column {
  string name = 1;
  oneof type {
    google.protobuf.Empty bool_column = 2;
    google.protobuf.Empty timestamp_column = 3;
    VarCharColumn varchar_column = 4;
    IntegerColumn int_column = 5;
  }
  bool is_primary_key = 6 ;
  bool is_unique = 7;
  bool not_nullable = 8;
}

message CreateTableRequest {
  string table_name = 1;
  repeated Column columns = 2;
}

message CreateTableResponse {
  string message = 1;
}

message DropTableRequest {
  string table_name = 1;
}

message DropTableResponse {
  string message = 1;
}

